---
const { selectedItem } = Astro.props;
---

<aside
    data-animation="default"
    data-collapse="medium"
    data-duration="400"
    data-easing="ease"
    data-easing2="ease"
    role="banner"
    class="sidebar w-nav"
>
    <div class="nav-content">
        <a href="/" class="w-nav-brand" aria-label="home">
            <div class="niv-data">
                <!-- <img
                    src="/assets/sam.jpg"
                    loading="lazy"
                    decoding="async"
                    width="48"
                    height="48"
                    alt="Adam Lee"
                    class="niv-image"
                /> -->
                <div>
                    <div class="label-white">Adam Lee</div>
                    <div class="label-gray">Engineering+ @ SST</div>
                </div>
            </div>
        </a>

        <nav role="navigation" class="w-nav-menu">
            <a
                href="/"
                class={`nav-link-container w-inline-block ${
                    selectedItem === "home" ? "w--current" : ""
                }`}
            >
                <img
                    src="/assets/home.svg"
                    loading="lazy"
                    decoding="async"
                    width="20"
                    height="20"
                    alt=""
                    class="nav-link-image"
                />
                <div>Home</div>
            </a>
            <a
                href="/certificates"
                class={`nav-link-container w-inline-block ${
                    selectedItem === "certificates" ? "w--current" : ""
                }`}
                aria-current={selectedItem === "certificates"
                    ? "page"
                    : undefined}
            >
                <img
                    src="/assets/award.svg"
                    loading="lazy"
                    decoding="async"
                    width="20"
                    height="20"
                    alt=""
                    class="nav-link-image"
                />
                <div>Achievements</div>
            </a>
        </nav>

        <div
            class="navbar-icon-button w-nav-button"
            style="-webkit-user-select: text;"
            aria-label="menu"
            role="button"
            tabindex="0"
        >
            <img
                src="/assets/menu.svg"
                loading="lazy"
                decoding="async"
                width="24"
                height="24"
                alt=""
                class="navbar-icon"
            />
        </div>
    </div>

    <script>
        import { setupNav } from "../scripts/nav.js";

        let cleanup: (() => void) | undefined;

        const initNav = () => {
            if (cleanup) cleanup();
            cleanup = setupNav();
        };

        document.addEventListener("astro:page-load", initNav);
        document.addEventListener("astro:before-swap", () => {
            if (cleanup) {
                cleanup();
                cleanup = undefined;
            }
        });
    </script>
</aside>
